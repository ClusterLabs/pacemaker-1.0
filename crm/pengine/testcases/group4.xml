<?xml version="1.0"?>
<!DOCTYPE cib SYSTEM "crm-1.0.dtd">
<cib>
  <configuration>
    <crm_config>
      <nvpair id="symmetric_cluster" name="symetric_cluster" value="false"/>
      <nvpair id="no_quorum_policy" name="no_quorum_policy" value="ignore"/>
    </crm_config>
    <nodes>
      <node id="uuid1" uname="node1" type="member"/>
      <node id="uuid2" uname="node2" type="member"/>
    </nodes>
    <resources>
      <resource id="rsc1" class="heartbeat" type="apache"/>
      <resource_group id="rsc2">
	<resource id="child_rsc1" class="heartbeat" type="apache"/>
	<resource id="child_rsc2" class="heartbeat" type="apache"/>
	<resource id="child_rsc3" class="heartbeat" type="apache"/>
      </resource_group>
      <resource id="rsc3" class="heartbeat" type="apache"/>
    </resources>
    <constraints>
      <rsc_order id="order1" from="rsc2" type="after"  to="rsc1"/>
      <rsc_order id="order2" from="rsc2" type="before" to="rsc3"/>
      <rsc_location id="run_rsc1" rsc="rsc1">
	<rule id="can1-1" score="1">
	  <expression attribute="uname" operation="eq" value="node2"/>
	</rule>
      </rsc_location>
      <rsc_location id="run_rsc2" rsc="rsc2">
	<rule id="can2-1" score="1">
	  <expression attribute="uname" operation="eq" value="node2"/>
	</rule>
      </rsc_location>
      <rsc_location id="run_rsc3" rsc="rsc3">
	<rule id="can3-1" score="1">
	  <expression attribute="uname" operation="eq" value="node2"/>
	</rule>
      </rsc_location>
    </constraints>
  </configuration>
  <status>
    <node_state id="uuid1" uname="node1" crmd="online" join="member" expected="member" timestamp="1086187789" in_ccm="true">
      <lrm>
	<lrm_agents>
	  <lrm_agent class="heartbeat" type="apache"/>
	</lrm_agents>
        <lrm_resources/>
      </lrm>
    </node_state>
    <node_state id="uuid2" uname="node2" crmd="online" join="member" expected="member" timestamp="1086187789" in_ccm="true">
      <lrm>
	<lrm_agents>
	  <lrm_agent class="heartbeat" type="apache"/>
	</lrm_agents>
        <lrm_resources>
          <lrm_resource id="rsc1" last_op="start" rsc_state="started" op_status="0" rc_code="0" on_node="node2"/>
          <lrm_resource id="rsc2:child_rsc1" last_op="start" rsc_state="started" op_status="0" rc_code="0" on_node="node2"/>
          <lrm_resource id="rsc2:child_rsc2" last_op="start" rsc_state="started" op_status="0" rc_code="0" on_node="node2"/>
          <lrm_resource id="rsc2:child_rsc3" last_op="start" rsc_state="started" op_status="0" rc_code="0" on_node="node2"/>
          <lrm_resource id="rsc3" last_op="start" rsc_state="started" op_status="0" rc_code="0" on_node="node2"/>
        </lrm_resources>
      </lrm>
    </node_state>
  </status>
</cib>
