CRM Admin Command-line Interface
##################################


Proposed Man Page
##################################

Usage
========================

crmadmin --daemon [-V] [daemon options]
	 --query  [-V] [-o <object_type> [-t <type>]] [-i <id>]
	 --delete [-V] -o <object_type> -i <id> 
	 --create [-V] -o <object_type> -i <id> [-d <desc>] [create_modify options] 
	 --modify [-V] -o <object_type> -i <id> [-d <desc>] [create_modify options] 

Top-level Options
========================
--daemon : Perform cluster admin functions

--query  : Retrieve information from the CIB

--delete : Remove objects from the CIB

--create : Create objects in the CIB

--modify : Modify objects in the CIB

--verbose : Be verbose
	   Short equivalent: -V

--help    : show help and exist
	   Short equivalent: -?

Common Options
========================
--obj_type <object_type>
   <object_type>: (node|resource|constraint)
   Set the type of object we are interested in. 
	   Short equivalent: -o

--id <id>
   <id>:  The unique identifier for a new or pre-existing object in the CIB.
	   Short equivalent: -i

--description <object_type>
   <object_type>: (node|resource|constraint)
   Set the type of object we are interested in. 
	   Short equivalent: -D


[daemon options]
========================
--recalc_tree
	   Recalculate the resource dependancy tree.	
	   Short equivalent: -R

--flush_recalc_tree
	   Like -T but recalculate (flush) the CIB first (Preferred).
	   Short equivalent: -F

--migrate_res <res>=<instance>
	   Migrate one resource, ie. instance <instance> of <res>, away from its current node.
	   Short equivalent: -I

--migrate_from  <node>
	   Migrate all resources away from <node>.
	   Short equivalent: -M

--unload <node>
	   As per -M, but then unload Heartbeat on <node>.
	   Short equivalent: -U

--disconnect <node>
	   Disconnect <node> but dont unload resources and dont recalculate
	   the dependancy tree.  The is for the upgrade process.  For now,
	   see lmb for details.
	   Short equivalent: -A

// what is this????
--reset <node>

--status <node>
	   Display the status of <node>.  Ie. Are all sub-systems running? 
	   Is it the DC? What resources is it running? Health. Etc.
	   Short equivalent: -S

--health  
           Display the health of the cluster.
	   Short equivalent: -H

--clear <node>
	   Clear all system generated contraints for <node>.  
	   Ie. we've manually fixed the problem(s).
	   Short equivalent: -C

--elect_dc
	   Force the election of a new DC.  May result in the same node
	   being elected.  The only way to guarentee a different node is to
	   perform a -U on the DC.
	   Short equivalent: -E

--whois_dc
	   Tells which node the DC is running on.
	   Short equivalent: -W

[create_modify options]
========================
--obj_type node: 
    --subtype (node|ping)
       What type of node is this.
       Short equivalent: -t

--obj_type resource: 
    --subtype (none|IPAddr|Nfs|Apache|Drbd|Stonith|...)
       What type of resource is this.
       Short equivalent: -t

    -max_instances <max_instances>
       <max_instances>: Positive integer.  The maximum instances of the 
			resource that should be running at any one time.  
			Default: 1.
       Short equivalent: -m
       
    --list_add <node>=<weight>        (can be specified more than once)
       Add a node/weight to the resource.
       Deletes are handled before Adds.
       <node>  : The id of a pre-existing node in the CIB.
       <weight>: Integer.  Relative preference for running on that node.  
		 Higher numbers translate into higher preference.
       Short equivalent: -a

    --list_del <node>=<weight>        (can be specified more than once)
       Delete a node/weight from the resource.
       Deletes are handled before Adds.
       Short equivalent: -d

    --list_wipe
       Wipe the complete list of nodes/weights from the resource
       Short equivalent: -w

--obj_type constraint: 
    --subtype (None|StartAfter|SameNode|Block|...)
       What type of constraint is this.
       Short equivalent: -t

    --constraint_del (never|stonith|active|localRestart|...)
       When should the constraint be removed.
       Default: never
       Short equivalent: -c
       
    --resource <resource>                    (can be specified a maximum of twice) 
       Overwrite the list of resources for the constraint.
       <resource>: The id of a pre-existing resource in the CIB.
       Short equivalent: -r

    --list_add <var_name>=<var_value>        (can be specified more than once)
       Add a variable name/value pair to the constraint.
       Deletes are handled before Adds.
       <var_name> : The variable name.
       <var_value>: The value the variable must take in order for the 
		    constraint to be satisfied.  
		    Possibly allow regular expressions here.
       Short equivalent: -a

    --list_del <var_name>=<var_value>        (can be specified more than once)
       Delete a variable name/value pair to the constraint.
       Deletes are handled before Adds.
       Short equivalent: -d

    --list_wipe
       Wipe the complete list of variable name/value pairs from the constraint.
       Short equivalent: -w
