#!/bin/sh
#
# $Id: IPaddr2.in,v 1.10 2005/11/03 07:45:51 xunsun Exp $
#
# Description:	wrapper of OCF RA IPaddr2, based on original heartbeat RA.
#		See OCF RA IPaddr2 for more information.
#
# Author:	Xun Sun <xunsun@cn.ibm.com>
# Support:      linux-ha@lists.linux-ha.org
# License:      GNU General Public License (GPL)
# Copyright:	(C) 2005 International Business Machines
#
#	This script manages IP alias IP addresses
#
#	It can add an IP alias, or remove one.
#
#	usage: $0 ip-address[/netmaskbits[/interface[:label][/broadcast]]] \
#	    {start|stop|status|monitor}
#
#	The "start" arg adds an IP alias.
#
#	Surprisingly, the "stop" arg removes one.	:-)
#
unset LANG; export LANG
LC_ALL=C
export LC_ALL

. @HB_RA_DIR@/hto-mapfuncs

USAGE="usage: $0 ip-address[/netmaskbits[/interface[:label][/broadcast]]]
{start|stop|status|monitor}\n\nNote: $0 only works on Linux";

usage() {
  echo -e $USAGE >&2
}

#
#	Add or remove IP alias for the given IP address...
#
if
    [ $# -ne 2 ]
then
    usage
    exit 1
fi

case $2 in
    start|stop|status|monitor)	;;
    *)	usage
 	exit 1
	;;
esac

ra_execocf  "rsc_id=IPaddr2_$1" "rsc_type=IPaddr2" "provider=heartbeat" $2 "ip=$1"
