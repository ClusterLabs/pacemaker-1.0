pacemaker (1.0.3-1) stable; urgency=medium
  * Update source tarball to revision: b133b3f19797 (stable-1.0) tip
  * Statistics:
      Changesets:      383
      Diff:            329 files changed, 15471 insertions(+), 15119 deletions(-)


  * Changes since Pacemaker-1.0.2
  + High: ais plugin: Fix quorum calculation (bnc#487003)
  + High: ais: Another memory fix leak in error path
  + High: ais: Bug bnc#482847, bnc#482905 - Force a clean exit of OpenAIS once Pacemaker has finished unloading
  + High: ais: Bug bnc#486858 - Fix update_member() to prevent spamming clients with membership events containing no changes
  + High: ais: Centralize all quorum calculations in the ais plugin and allow expected votes to be configured int he cib
  + High: ais: Correctly handle a return value of zero from openais_dispatch_recv()
  + High: ais: Disable logging to a file
  + High: ais: Fix memory leak in error path
  + High: ais: IPC messages are only in scope until a response is sent
  + High: All signal handlers used with CL_SIGNAL() need to be as minimal as possible
  + High: cib: Bug bnc#482885 - Simplify CIB disk-writes to prevent data loss.  Required a change to the backup filename format
  + High: cib: crmd: Revert part of 9782ab035003.  Complex shutdown routines need G_main_add_SignalHandler to avoid race coditions
  + High: crm: Avoid infinite loop during crm configure edit (bnc#480327)
  + High: crmd: Avoid a race condition by waiting for the attrd update to trigger a transition automatically
  + High: crmd: Bug bnc#480977 - Prevent extra, partial, shutdown when a node restarts too quickly
  + High: crmd: Bug bnc#480977 - Prevent extra, partial, shutdown when a node restarts too quickly (verified)
  + High: crmd: Bug bnc#489063 - Ensure the DC is always unset after we 'loose' an election
  + High: crmd: Bug BSC#479543 - Correctly find the migration source for timed out migrate_from actions
  + High: crmd: Call crm_peer_init() before we start the FSA - prevents a race condition when used with Heartbeat
  + High: crmd: Erasing the status section shouldn't be forced to the local node
  + High: crmd: Fix memory leak in cib notication processing code
  + High: crmd: Fix memory leak in transition graph processing
  + High: crmd: Fix memory leaks found by valgrind
  + High: crmd: More memory leaks fixes found by valgrind
  + High: fencing: stonithd: is_heartbeat_cluster is a no-no if there is no heartbeat support
  + High: PE: Bug bnc#466788 - Exclude nodes that can't run resources
  + High: PE: Bug bnc#466788 - Make colocation based on node attributes work
  + High: PE: Bug BNC#478687 - Don't crash when clone-max is 0
  + High: PE: Bug bnc#488721 - Fix id-ref expansion for clones, the doc-root for clone children is not the cib root
  + High: PE: Bug bnc#490418 - Correctly determine node state for nodes wishing to be terminated
  + High: PE: Bug LF#2087 - Correctly parse the state of anonymous clones that have multiple instances on a given node
  + High: PE: Bug lf#2089 - Meta attributes are not inherited by clone children
  + High: PE: Bug lf#2091 - Correctly restart modified resources that were found active by a probe
  + High: PE: Bug lf#2094 - Fix probe ordering for cloned groups
  + High: PE: Bug LF:2075 - Fix large pingd memory leaks
  + High: PE: Correctly attach orphaned clone children to their parent
  + High: PE: Correctly handle terminate node attributes that are set to the output from time()
  + High: PE: Ensure orphaned clone members are hooked up to the parent when clone-max=0
  + High: PE: Fix memory leak in LogActions
  + High: PE: Fix the determination of whether a group is active
  + High: PE: Look up the correct promotion preference for anonymous masters
  + High: PE: Simplify handling of start failures by changing the default migration-threshold to INFINITY
  + High: PE: The ordered option for clones no longer causes extra start/stop operations
  + High: RA: Bug bnc#490641 - Shut down dlm_controld with -TERM instead of -KILL
  + High: RA: pingd: Set default ping interval to 1 instead of 0 seconds
  + High: Resources: pingd - Correctly tell the ping daemon to shut down
  + High: Tools: Bug bnc#483365 - Ensure the command from cluster_test includes a value for --log-facility
  + High: Tools: cli: fix and improve delete command
  + High: Tools: crm: add and implement templates
  + High: Tools: crm: add support for command aliases and some common commands (i.e. cd,exit)
  + High: Tools: crm: create top configuration nodes if they are missing
  + High: Tools: crm: fix parsing attributes for rules (broken by the previous changeset)
  + High: Tools: crm: new ra set of commands
  + High: Tools: crm: resource agents information management
  + High: Tools: crm: rsc/op_defaults
  + High: Tools: crm: support for no value attribute in nvpairs
  + High: Tools: crm: the new configure monitor command
  + High: Tools: crm: the new configure node command
  + High: Tools: crm_mon - Prevent use-of-NULL when summarizing an orphan
  + High: Tools: hb2openais: create clvmd clone for respawn evmsd in ha.cf
  + High: Tools: hb2openais: fix a serious recursion bug in xml node processing
  + High: Tools: hb2openais: fix ocfs2 processing
  + High: Tools: pingd - prevent double free of getaddrinfo() output in error path
  + High: Tools: The default re-ping interval for pingd should be 1s not 1ms
  + Medium (bnc#479049): Tools: crm: add validation of resource type for the configure primitive command
  + Medium (bnc#479050): Tools: crm: add help for RA parameters in tab completion
  + Medium (bnc#479050): Tools: crm: add tab completion for primitive params/meta/op
  + Medium (bnc#479050): Tools: crm: reimplement cluster properties completion
  + Medium (bnc#486968): Tools: crm: listnodes function requires no parameters (don't mix completion with other stuff)
  + Medium: ais: Remove the ugly hack for dampening AIS membership changes
  + Medium: cib: Fix memory leaks by using mainloop_add_signal
  + Medium: cib: Move more logging to the debug level (was info)
  + Medium: cib: Overhaul the processing of synchronous replies
  + Medium: Core: Add library functions for instructing the cluster to terminate nodes
  + Medium: crmd: Add new expected-quorum-votes option
  + Medium: crmd: Allow up to 5 retires when an attrd update fails
  + Medium: crmd: Automatically detect and use new values for crm_config options
  + Medium: crmd: Bug bnc#490426 - Escalated shutdowns stall when there are pending resource operations
  + Medium: crmd: Clean up and optimize the DC election algorithm
  + Medium: crmd: Fix memory leak in shutdown
  + Medium: crmd: Fix memory leaks spotted by Valgrind
  + Medium: crmd: Ingore join messages from hosts other than our DC
  + Medium: crmd: Limit the scope of resource updates to the status section
  + Medium: crmd: Prevent the crmd from being respawned if its told to shut down when it didn't ask to be
  + Medium: crmd: Re-check the election status after membership events
  + Medium: crmd: Send resource updates via the local CIB during elections
  + Medium: PE: Bug bnc#491441 - crm_mon does not display operations returning 'uninstalled' correctly
  + Medium: PE: Bug lf#2101 - For location constraints, role=Slave is equivalent to role=Started
  + Medium: PE: Clean up the API - removed ->children() and renamed ->find_child() to fine_rsc()
  + Medium: PE: Compress the display of healthy anonymous clones
  + Medium: PE: Correctly log the actions for resources that are being recovered
  + Medium: PE: Determin a promotion score for complex resources
  + Medium: PE: Ensure clones always have a value for globally-unique
  + Medium: PE: Prevent orphan clones from being allocated
  + Medium: RA: controld: Return proper exit code for stop op.
  + Medium: Tools: Bug bnc#482558 - Fix logging test in cluster_test
  + Medium: Tools: Bug bnc#482828 - Fix quoting in cluster_test logging setup
  + Medium: Tools: Bug bnc#482840 - Include directory path to CTSlab.py
  + Medium: Tools: crm: add more user input checks
  + Medium: Tools: crm: don't check resource status of we're working with a shadow
  + Medium: Tools: crm: fix id-refs and allow reference to top objects (i.e. primitive)
  + Medium: Tools: crm: ignore comments in the CIB
  + Medium: Tools: crm: multiple column output wouldn't work with small lists
  + Medium: Tools: crm: refuse to delete running resources
  + Medium: Tools: crm: rudimentary if-else for templates
  + Medium: Tools: crm: Start/stop clones via target-role.
  + Medium: Tools: crm_mon - Compress the node status for healthy and offline nodes
  + Medium: Tools: crm_shadow - Return 0/cib_ok when --create-empty succeeds
  + Medium: Tools: crm_shadow - Support -e, the short form of --create-empty
  + Medium: Tools: Make attrd quieter
  + Medium: Tools: pingd - Avoid using various clplumbing functions as they seem to leak
  + Medium: Tools: Reduce pingd logging

 -- Andrew Beekhof <abeekhof@suse.de>  Wed, 08 Apr 2009 09:50:01 +0200

pacemaker (1.0.2-1) stable; urgency=medium
  * Update source tarball to revision: d232d19daeb9 (stable-1.0) tip
  * Statistics:
      Changesets:      441
      Diff:            639 files changed, 20871 insertions(+), 21594 deletions(-)

  * Changes since Pacemaker-1.0.1
  + High (bnc#450815): Tools: crm cli: don't generate id for the operations tag
  + High: ais: Add support for the new AIS IPC layer
  + High: ais: Always set header.error to the correct default: SA_AIS_OK
  + High: ais: Bug BNC#456243 - Ensure the membership cache always contains an entry for the local node
  + High: ais: Bug BNC:456208 - Prevent deadlocks by not logging in the child process before exec()
  + High: ais: By default, disable supprt for the WIP openais IPC patch
  + High: ais: Detect and handle situations where ais and the crm disagree on the node name
  + High: ais: Ensure crm_peer_seq is updated after a membership update
  + High: ais: Make sure all IPC header fields are set to sane defaults
  + High: ais: Repair and streamline service load now that whitetank startup functions correctly
  + High: build: create and install doc files
  + High: cib: Allow clients without mainloop to connect to the cib
  + High: cib: CID:18 - Fix use-of-NULL in cib_perform_op
  + High: cib: CID:18 - Repair errors introduced in b5a18704477b - Fix use-of-NULL in cib_perform_op
  + High: cib: Ensure diff's contain the correct values of admin_epoch
  + High: cib: Fix four moderately sized memory leaks detected by Valgrind
  + High: Core: CID:10 - Prevent indexing into an array of schemas with a negative value
  + High: Core: CID:13 - Fix memory leak in log_data_element
  + High: Core: CID:15 - Fix memory leak in crm_get_peer
  + High: Core: CID:6 - Fix use-of-NULL in copy_ha_msg_input
  + High: Core: Fix crash in the membership code preventing node shutdown
  + High: Core: Fix more memory leaks foudn by valgrind
  + High: Core: Prevent unterminated strings after decompression
  + High: crmd: Bug BNC:467995 - Delay marking STONITH operations complete until STONITH tells us so
  + High: crmd: Bug LF:1962 - Don't NACK peers because they're not (yet) in our membership.  Just ignore them.
  + High: crmd: Bug LF:2010 - Ensure fencing cib updates create the node_state entry if needed to preent re-fencing during cluster startup
  + High: crmd: Correctly handle reconnections to attrd
  + High: crmd: Ensure updates for lost migrate operations indicate which node it tried to migrating to
  + High: crmd: If there are no nodes to finalize, start an election.
  + High: crmd: If there are no nodes to welcome, start an election.
  + High: crmd: Prevent node attribute loss by detecting attrd disconnections immediately
  + High: crmd: Prevent node re-probe loops by ensuring manditory actions always complete
  + High: PE: Bug 2005 - Fix startup ordering of cloned stonith groups
  + High: PE: Bug 2006 - Correctly reprobe cloned groups
  + High: PE: Bug BNC:465484 - Fix the no-quorum-policy=suicide option
  + High: PE: Bug LF:1996 - Correctly process disabled monitor operations
  + High: PE: CID:19 - Fix use-of-NULL in determine_online_status
  + High: PE: Clones now default to globally-unique=false
  + High: PE: Correctly calculate the number of available nodes for the clone to use
  + High: PE: Only shoot online nodes with no-quorum-policy=suicide
  + High: PE: Prevent on-fail settings being ignored after a resource is successfully stopped
  + High: PE: Prevent use-of-NULL for failed migrate actions in process_rsc_state()
  + High: PE: Remove an optimization for the terminate node attribute that caused the cluster to block indefinitly
  + High: PE: Repar the ability to colocate based on node attributes other than uname
  + High: PE: Start the correct monitor operation for unmanaged masters
  + High: stonith: CID:3 - Fix another case of exceptionally poor error handling by the original stonith developers
  + High: stonith: CID:5 - Checking for NULL and then dereferencing it anyway is an interesting approach to error handling
  + High: stonithd: Sending IPC to the cluster is a privileged operation
  + High: stonithd: wrong checks for shmid (0 is a valid id)
  + High: Tools: attrd - Correctly determine when an attribute has stopped changing and should be committed to the CIB
  + High: Tools: Bug 2003 - pingd doesn't correctly detect failures when the interface is down
  + High: Tools: Bug 2003 - pingd doesn't correctly handle node-down events on multi-NIC systems
  + High: Tools: Bug 2021 - pingd does not detect sequence wrapping correctly, incorrectly reports nodes offline
  + High: Tools: Bug BNC:468066 - Don't use the result of uname() when its no longer in scope
  + High: Tools: Bug BNC:473265 - crm_resource -L dumps core
  + High: Tools: Bug LF:2001 - Transient node attributes should be set via attrd
  + High: Tools: Bug LF:2036 - crm_resource cannot set/get parameters for cloned resources
  + High: Tools: Bug LF:2046 - Node attribute updates are lost because attrd can take too long to start
  + High: Tools: Cause the correct clone instance to be failed with crm_resource -F
  + High: Tools: cluster_test - Allow the user to select a stack and fix CTS invocation
  + High: Tools: crm cli: allow rename only if the resource is stopped
  + High: Tools: crm cli: catch system errors on file operations
  + High: Tools: crm cli: completion for ids in configure
  + High: Tools: crm cli: drop '-rsc' from attributes for order constraint
  + High: Tools: crm cli: exit with an appropriate exit code
  + High: Tools: crm cli: fix wrong order of action and resource in order constraint
  + High: Tools: crm cli: fox wrong exit code
  + High: Tools: crm cli: improve handling of cib attributes
  + High: Tools: crm cli: new command: configure rename
  + High: Tools: crm cli: new command: configure upgrade
  + High: Tools: crm cli: new command: node delete
  + High: Tools: crm cli: prevent key errors on missing cib attributes
  + High: Tools: crm cli: print long help for help topics
  + High: Tools: crm cli: return on syntax error when parsing score
  + High: Tools: crm cli: rsc_location can be without nvpairs
  + High: Tools: crm cli: short node preference location constraint
  + High: Tools: crm cli: sometimes, on errors, level would change on single shot use
  + High: Tools: crm cli: syntax: drop a bunch of commas (remains of help tables conversion)
  + High: Tools: crm cli: verify user input for sanity
  + High: Tools: crm: find expressions within rules (don't always skip xml nodes due to used id)
  + High: Tools: crm_master shouldn't define a set id now that attrd is used.  Defining one can break lookups
  + High: Tools: crm_mon Use the OID assigned to the project by IANA for SNMP traps
  + High: Tools: hb2openais: add constraints for clvmd to controld
  + High: Tools: hb2openais: adjust path to the supporting script and set CONF variable
  + High: Tools: hb2openais: improve media processing and set rrp_mode for multiple rings configuration
  + High: Tools: hb2openais: openais supports up to two rings
  + High: Tools: hb2openais: set no-quorum-policy to ignore for 2-node clusters
  + High: Tools: hb2openais: start mgmtd if appropriate
  + Medium (bnc#445622): Tools: crm cli: improve the node show command and drop node status
  + Medium (LF 2009): stonithd: improve timeouts for remote fencing
  + Medium: ais: Allow dead peers to be removed from membership calculations
  + Medium: ais: Pass node deletion events on to clients
  + Medium: ais: Sanitize ipc usage
  + Medium: ais: Supply the node's uname in addtion to the id
  + Medium: Build: Clean up configure to ensure NON_FATAL_CFLAGS is consistent with CFLAGS (ie. includes -g)
  + Medium: Build: Install cluster_test
  + Medium: Build: Use more restrictive CFLAGS and fix the resulting errors
  + Medium: cib: CID:20 - Fix potential use-after-free in cib_native_signon
  + Medium: Core: Bug BNC:474727 - Set a maximum time to wait for IPC messages
  + Medium: Core: CID:12 - Fix memory leak in decode_transition_magic error path
  + Medium: Core: CID:14 - Fix memory leak in calculate_xml_digest error path
  + Medium: Core: CID:16 - Fix memory leak in date_to_string error path
  + Medium: Core: Try to track down the cause of XML parsing errors
  + Medium: crmd: Bug BNC:472473 - Don't wait excessive amounts of time for lost actions
  + Medium: crmd: Bug BNC:472473 - Reduce the transition timeout to action_timeout+network_delay
  + Medium: crmd: Don't fast-track the processing of LRM refreshes when there are pending actions.
  + Medium: crmd: do_dc_join_filter_offer - Check the 'join' message is for the current instance before deciding to NACK peers
  + Medium: crmd: Find option values without having to do a config upgrade
  + Medium: crmd: Implement shutdown using a transient node attribute
  + Medium: crmd: Update the crmd options to use dashes instead of underscores
  + Medium: cts: Add 'cluster reattach' to the suite of automated regression tests
  + Medium: cts: cluster_test - Make some usability enhancements
  + Medium: CTS: cluster_test - suggest a valid port number
  + Medium: CTS: Fix python import order
  + Medium: cts: Implement an automated SplitBrain test
  + Medium: CTS: Remove references to deleted classes
  + Medium: Extra: Resources - Use HA_VARRUN instead of HA_RSCTMP for state files as Heartbeat removes HA_RSCTMP at startup
  + Medium: HB: Bug 1933 - Fake crmd_client_status_callback() calls because HB doesn't provide them for already running processes
  + Medium: PE: CID:17 - Fix memory leak in find_actions_by_task error path
  + Medium: PE: CID:7,8 - Prevent hypothetical use-of-NULL in LogActions
  + Medium: PE: Defer logging the actions performed on a resource until we've processed ordering constraints
  + Medium: PE: Remove the symmetrical attribute of colocation constraints
  + Medium: Resources: pingd - fix the meta defaults
  + Medium: Resources: Stateful - Add missing meta defaults
  + Medium: stonithd: exit if we the pid file cannot be locked
  + Medium: Tools: Allow attrd clients to specify the ID the attribute should be created with
  + Medium: Tools: attrd - Allow attribute updates to be performed from a hosts' peer
  + Medium: Tools: Bug LF:1994 - Clean up crm_verify return codes
  + Medium: Tools: Change the pingd defaults to ping hosts once every second (instead of 5 times every 10 seconds)
  + Medium: Tools: cibmin - Detect resource operations with a view to providing email/snmp/cim notification
  + Medium: Tools: crm cli: add back symmetrical for order constraints
  + Medium: Tools: crm cli: generate role in location when converting from xml
  + Medium: Tools: crm cli: handle shlex exceptions
  + Medium: Tools: crm cli: keep order of help topics
  + Medium: Tools: crm cli: refine completion for ids in configure
  + Medium: Tools: crm cli: replace inf with INFINITY
  + Medium: Tools: crm cli: streamline cib load and parsing
  + Medium: Tools: crm cli: supply provider only for ocf class primitives
  + Medium: Tools: crm_mon - Add support for sending mail notifications of resource events
  + Medium: Tools: crm_mon - Include the DC's version in status summary
  + Medium: Tools: crm_mon - Sanitize startup and option processing
  + Medium: Tools: crm_mon - switch to event-driven updates and add support for sending snmp traps
  + Medium: Tools: crm_shadow - Replace the --locate option with the saner --edit
  + Medium: Tools: hb2openais: do not remove Evmsd resources, but replace them with clvmd
  + Medium: Tools: hb2openais: replace crmadmin with crm_mon
  + Medium: Tools: hb2openais: replace the lsb class with ocf for o2cb
  + Medium: Tools: hb2openais: reuse code
  + Medium: Tools: LF:2029 - Display an error if crm_resource is used to reset the operation history of non-primitive resources
  + Medium: Tools: Make pingd resilient to attrd failures
  + Medium: Tools: pingd - fix the command line switches
  + Medium: Tools: Rename ccm_tool to crm_node

 -- Andrew Beekhof <abeekhof@suse.de>  Mon, 16 Feb 2009 13:32:07 +0100

pacemaker (1.0.1-1) stable; urgency=high
  * Update source tarball to revision: 2883431a818b (stable-1.0) tip
  * Statistics:
      Changesets:      160
      Diff:            810 files changed, 6881 insertions(+), 6214 deletions(-)

  * Changes since 388654dfef8f
  + High: ais: Allow the crmd to get callbacks whenever a node's state changes
  + High: ais: Ensure HA_RSCTMP exists for use by resource agents
  + High: ais: Hook up the openais.conf config logging options
  + High: ais: Zero out the PID of disconnecting clients
  + High: cib: Ensure global updates cause a disk write when appropriate
  + High: Core: Add an extra snaity check to getXpathResults() to prevent segfaults
  + High: Core: Don't redefine __FUNCTION__ unnecessarily
  + High: Core: Repair the ability to have comments in the configuration
  + High: crmd: Bug:1975 - crmd should wait indefinitely for stonith operations to complete
  + High: crmd: Ensure PE processing does not occur for all error cases in do_pe_invoke_callback
  + High: crmd: Requests to the CIB should cause any prior PE calculations to be ignored
  + High: PE: Bug LF:1988 - Ensure recurring operations always have the correct target-rc set
  + High: PE: Bug LF:1988 - For unmanaged resources we need to skip the usual can_run_resources() checks
  + High: PE: Ensure the terminate node attribute is handled correctly
  + High: PE: Fix optional colocation
  + High: PE: Improve up the detection of 'new' nodes joining the cluster
  + High: PE: Prevent assert failures in master_color() by ensuring unmanaged masters are always reallocated to their current location
  + High: Tools: crm cli: parser: return False on syntax error and None for comments
  + High: Tools: crm cli: unify template and edit commands
  + High: Tools: crm_shadow - Show more line number information after validation failures
  + High: Tools: hb2openais: add option to upgrade the CIB to v3.0
  + High: Tools: hb2openais: add U option to getopts and update usage
  + High: Tools: hb2openais: backup improved and multiple fixes
  + High: Tools: hb2openais: fix class/provider reversal
  + High: Tools: hb2openais: fix testing
  + High: Tools: hb2openais: move the CIB update to the end
  + High: Tools: hb2openais: update logging and set logfile appropriately
  + High: Tools: LF:1969 - Attrd never sets any properties in the cib
  + High: Tools: Make attrd functional on OpenAIS
  + Medium: ais: Hook up the options for specifying the expected number of nodes and total quorum votes
  + Medium: ais: Provide better feedback when nodes change nodeid's (in openais.conf)
  + Medium: cib: Always store cib contents on disk with num_updates=0
  + Medium: cib: Ensure remote access ports are cleaned up on shutdown
  + Medium: crmd: Detect deleted resource operations automatically
  + Medium: crmd: Erase a node's resource operations and transient attributes after a successful STONITH
  + Medium: crmd: Find a more appropriate place to update quorum and refresh attrd attributes
  + Medium: crmd: Fix the handling of unexpected PE exits to ensure the current CIB is stored
  + Medium: crmd: Fix the recording of pending operations in the CIB
  + Medium: crmd: Initiate an attrd refresh _after_ the status section has been fully repopulated
  + Medium: crmd: Only the DC should update quorum in an openais cluster
  + Medium: Ensure meta attributes are used consistantly
  + Medium: PE: Allow group and clone level resource attributes
  + Medium: PE: Bug N:437719 - Ensure scores from colocated resources count when allocating groups
  + Medium: PE: Prevent lsb scripts from being used in globally unique clones
  + Medium: PE: Make a best-effort guess at a migration threshold for people with 0.6 configs
  + Medium: Resources: controld - ensure we are part of a clone with globally_unique=false
  + Medium: Tools: attrd - Automatically refresh all attributes after a CIB replace operation
  + Medium: Tools: Bug LF:1985 - crm_mon - Correctly process failed cib queries to allow reconnection after cluster restarts
  + Medium: Tools: Bug LF:1987 - crm_verify incorrectly warns of configuration upgrades for the most recent version
  + Medium: Tools: crm (bnc#441028): check for key error in attributes management
  + Medium: Tools: crm_mon - display the meaning of the operation's rc code instead of the status
  + Medium: Tools: crm_mon - Fix the display of timing data
  + Medium: Tools: crm_verify - check that we're being asked to validate a complete config
  + Medium: xml: Relax the restriction on the contents of rsc_locaiton.node

 -- Andrew Beekhof <abeekhof@suse.de>  Mon, 17 Nov 2008 10:31:37 +0100

pacemaker (1.0.0-1) stable; urgency=medium
  * Update source tarball to revision: 388654dfef8f tip
  * Statistics:
      Changesets:      261
      Diff:            3021 files changed, 244985 insertions(+), 111596 deletions(-)

  * Changes since f805e1b30103
  + High: add the crm cli program
  + High: ais: Move the service id definition to a common location and make sure it is always used
  + High: build: rename hb2openais.sh to .in and replace paths with vars
  + High: cib: Implement --create for crm_shadow
  + High: cib: Remove dead files
  + High: Core: Allow the expected number of quorum votes to be configrable
  + High: Core: cl_malloc and friends were removed from Heartbeat
  + High: Core: Only call xmlCleanupParser() if we parsed anything.  Doing so unconditionally seems to cause a segfault
  + High: hb2openais.sh: improve pingd handling; several bugs fixed
  + High: hb2openais: fix clone creation; replace EVMS strings
  + High: new hb2openais.sh conversion script
  + High: PE: Bug LF:1950 - Ensure the current values for all notification variables are always set (even if empty)
  + High: PE: Bug LF:1955 - Ensure unmanaged masters are unconditionally repromoted to ensure they are monitored correctly.
  + High: PE: Bug LF:1955 - Fix another case of filtering causing unmanaged master failures
  + High: PE: Bug LF:1955 - Umanaged mode prevents master resources from being allocated correctly
  + High: PE: Bug N:420538 - Anit-colocation caused a positive node preference
  + High: PE: Correctly handle unmanaged resources to prevent them from being started elsewhere
  + High: PE: crm_resource - Fix the --migrate command
  + High: PE: MAke stonith-enabled default to true and warn if no STONITH resources are found
  + High: PE: Make sure orphaned clone children are created correctly
  + High: PE: Monitors for unmanaged resources don't need to wait for start/promote/demote actions to complete
  + High: stonithd (LF 1951): fix remote stonith operations
  + High: stonithd: fix handling of timeouts
  + High: stonithd: fix logic for stonith resource priorities
  + High: stonithd: implement the fence-timeout instance attribute
  + High: stonithd: initialize value before reading fence-timeout
  + High: stonithd: set timeouts for fencing ops to the timeout of the start op
  + High: stonithd: stonith rsc priorities (new feature)
  + High: Tools: Add hb2openais - a tool for upgrading a Heartbeat cluster to use OpenAIS instead
  + High: Tools: crm_verify - clean up the upgrade logic to prevent crash on invalid configurations
  + High: Tools: Make pingd functional on Linux
  + High: Update version numbers for 1.0 candidates
  + Medium: ais: Add support for a synchronous call to retrieve the node's nodeid
  + Medium: ais: Use the agreed service number
  + Medium: Build: Reliably detect heartbeat libraries during configure
  + Medium: Build: Supply prototypes for libreplace functions when needed
  + Medium: Build: Teach configure how to find corosync
  + Medium: Core: Provide better feedback if Pacemaker is started by a stack it doesn't support
  + Medium: crmd: Avoid calling GHashTable functions with NULL
  + Medium: crmd: Delay raising I_ERROR when the PE exits until we've had a chance to save the current CIB
  + Medium: crmd: Hook up the stonith-timeout option to stonithd
  + Medium: crmd: Prevent potential use-of-NULL in global_timer_callback
  + Medium: crmd: Rationalize the logging of graph aborts
  + Medium: PE: Add a stonith_timeout option and remove new options that are better set in rsc_defaults
  + Medium: PE: Allow external entities to ask for a node to be shot by creating a terminate=true transient node attribute
  + Medium: PE: Bug LF:1950 - Notifications do not contain all documented resource state fields
  + Medium: PE: Bug N:417585 - Don't restart group children who's individual score drops below zero
  + Medium: PE: Detect clients that disconnect before receiving their reply
  + Medium: PE: Implement a true maintenance mode
  + Medium: PE: Implement on-fail=standby for NTT.  Derived from a patch by Satomi TANIGUCHI
  + Medium: PE: Print the correct message when stonith is disabled
  + Medium: PE: ptest - check the input is valid before proceeding
  + Medium: PE: Revert group stickiness to the 'old way'
  + Medium: PE: Use the correct attribute for action 'requires' (was prereq)
  + Medium: stonithd: Fix compilation without full heartbeat install
  + Medium: stonithd: exit with better code on empty host list
  + Medium: tools: Add a new regression test for CLI tools
  + Medium: tools: crm_resource - return with non-zero when a resource migration command is invalid
  + Medium: tools: crm_shadow - Allow the admin to start with an empty CIB (and no cluster connection)
  + Medium: xml: pacemaker-0.7 is now an alias for the 1.0 schema

 -- Andrew Beekhof <abeekhof@suse.de>  Thu, 16 Oct 2008 11:16:46 +0200

pacemaker (0.7.3-1) stable; urgency=medium
  * Update source tarball to revision: 33e677ab7764+ tip
  * Statistics:
      Changesets:      133
      Diff:            89 files changed, 7492 insertions(+), 1125 deletions(-)

  * Changes since f805e1b30103
  + High: Tools: add the crm cli program
  + High: Core: cl_malloc and friends were removed from Heartbeat
  + High: Core: Only call xmlCleanupParser() if we parsed anything.  Doing so unconditionally seems to cause a segfault
  + High: new hb2openais.sh conversion script
  + High: PE: Bug LF:1950 - Ensure the current values for all notification variables are always set (even if empty)
  + High: PE: Bug LF:1955 - Ensure unmanaged masters are unconditionally repromoted to ensure they are monitored correctly.
  + High: PE: Bug LF:1955 - Fix another case of filtering causing unmanaged master failures
  + High: PE: Bug LF:1955 - Umanaged mode prevents master resources from being allocated correctly
  + High: PE: Bug N:420538 - Anit-colocation caused a positive node preference
  + High: PE: Correctly handle unmanaged resources to prevent them from being started elsewhere
  + High: PE: crm_resource - Fix the --migrate command
  + High: PE: MAke stonith-enabled default to true and warn if no STONITH resources are found
  + High: PE: Make sure orphaned clone children are created correctly
  + High: PE: Monitors for unmanaged resources don't need to wait for start/promote/demote actions to complete
  + High: stonithd (LF 1951): fix remote stonith operations
  + High: Tools: crm_verify - clean up the upgrade logic to prevent crash on invalid configurations
  + Medium: ais: Add support for a synchronous call to retrieve the node's nodeid
  + Medium: ais: Use the agreed service number
  + Medium: PE: Allow external entities to ask for a node to be shot by creating a terminate=true transient node attribute
  + Medium: PE: Bug LF:1950 - Notifications do not contain all documented resource state fields
  + Medium: PE: Bug N:417585 - Don't restart group children who's individual score drops below zero
  + Medium: PE: Implement a true maintenance mode
  + Medium: PE: Print the correct message when stonith is disabled
  + Medium: stonithd: exit with better code on empty host list
  + Medium: xml: pacemaker-0.7 is now an alias for the 1.0 schema

 -- Andrew Beekhof <abeekhof@suse.de>  Mon, 22 Sep 2008 12:24:54 +0200

pacemaker (0.7.1-1) stable; urgency=medium
  * Update source tarball to revision: f805e1b30103+ tip
  * Statistics:
      Changesets:      184
      Diff:            513 files changed, 43408 insertions(+), 43783 deletions(-)

  * Testing Notes:

  + Test hardware:

  + All testing was performed with STONITH enabled

  + Pending bugs encountered during testing:

  * Changes since 0.7.0-19
  + Fix compilation when GNUTLS isnt found
  + Hg: Use the default branch name for dev
  + High: admin: Fix use-after-free in crm_mon
  + High: Build: Remove testing code that prevented heartbeat-only builds
  + High: cib: Use single quotes so that the xpath queries for nvpairs will succeed
  + High: crmd: Always connect to stonithd when the TE starts and ensure we notice if it dies
  + High: crmd: Correctly handle a dead PE process
  + High: crmd: Make sure async-failures cause the failcount to be incrimented
  + High: PE: Bug LF:1941 - Handle failed clone instance probes when clone-max < #nodes
  + High: PE: Parse resource ordering sets correctly
  + High: PE: Prevent use-of-NULL - order->rsc_rh will not always be non-NULL
  + High: PE: Unpack colocation sets correctly
  + High: Tools: crm_mon - Prevent use-of-NULL for orphaned resources
  + Medium: ais: Add support for a synchronous call to retrieve the node's nodeid
  + Medium: ais: Allow transient clients to receive membership updates
  + Medium: ais: Avoid double-free in error path
  + Medium: ais: Include in the mebership nodes for which we haven't determined their hostname
  + Medium: ais: Spawn the PE from the ais plugin instead of the crmd
  + Medium: cib: By default, new configurations use the latest schema
  + Medium: cib: Clean up the CIB if it was already disconnected
  + Medium: cib: Only incriment num_updates if something actually changed
  + Medium: cib: Prevent use-after-free in client after abnormal termination of the CIB
  + Medium: Core: Fix memory leak in xpath searches
  + Medium: Core: Get more details regarding parser errors
  + Medium: Core: Repair expand_plus_plus - don't call char2score on unexpanded values
  + Medium: Core: Switch to the libxml2 parser - its significantly faster
  + Medium: Core: Use a libxml2 library function for xml -> text conversion
  + Medium: crmd: Asynchronous failure actions have no parameters
  + Medium: crmd: Avoid calling glib functions with NULL
  + Medium: crmd: Do not allow an election to promote a node from S_STARTING
  + Medium: crmd: Do not vote if we've not completed the local startup
  + Medium: crmd: Fix te_update_diff() now that get_object_root() functions differently
  + Medium: crmd: Fix the lrmd xpath expressions to not contain quotes
  + Medium: crmd: If we get a join offer during an election, better restart the election
  + Medium: crmd: No further processing is needed when using the LRM's API call for failing resources
  + Medium: crmd: Only update have-quorum if the value changed
  + Medium: crmd: Repair the input validation logic in do_te_invoke
  + Medium: cts: CIB's can no longer contain comments
  + Medium: cts: Enable a bunch of tests that were incorrectly disabled
  + Medium: cts: The libxml2 parser wont allow v1 resources to use integers as parameter names
  + Medium: Don't use the cluster UID and GID directly.  Look them up based on the configured value of HA_CCMUSER
  + Medium: Fix compilation when heartbeat is not supported
  + Medium: PE: Allow groups to be involved in optional ordering constraints
  + Medium: PE: Allow sets of operations to be reused by multiple resources
  + Medium: PE: Bug LF:1941 - Mark extra clone instances as orphans and don't show inactive ones
  + Medium: PE: Determin the correct migration-threshold during resource expansion
  + Medium: PE: Implement no-quorum-policy=suicide (FATE #303619)
  + Medium: pengine: Clean up resources after stopping old copies of the PE
  + Medium: pengine: Teach the PE how to stop old copies of itself
  + Medium: Tools: Backport hb_report updates
  + Medium: Tools: cib_shadow - On create, spawn a new shell with CIB_shadow and PS1 set accordingly
  + Medium: Tools: Rename cib_shadow to crm_shadow

 -- Andrew Beekhof <abeekhof@suse.de>  Wed, 20 Aug 2008 10:19:14 +0200

pacemaker (0.7.0-19) unstable; urgency=medium
  * Update source tarball to revision: 007c3a1c50f5 (unstable) tip
  * Statistics:
      Changesets:      108
      Diff:            216 files changed, 4632 insertions(+), 4173 deletions(-)

  * Changes added since unstable-0.7
  + High: admin: Fix use-after-free in crm_mon
  + High: ais: Change the tag for the ais plugin to "pacemaker" (used in openais.conf)
  + High: ais: Log terminated processes as an error
  + High: cib: Performance - Reorganize things to avoid calculating the XML diff twice
  + High: PE: Bug LF:1941 - Handle failed clone instance probes when clone-max < #nodes
  + High: PE: Fix memory leak in action2xml
  + High: PE: Make OCF_ERR_ARGS a node-level error rather than a cluster-level one
  + High: PE: Properly handle clones that are not installed on all nodes
  + Medium: admin: cibadmin - Show any validation errors if the upgrade failed
  + Medium: admin: cib_shadow - Implement --locate to display the underlying filename
  + Medium: admin: cib_shadow - Implement a --diff option
  + Medium: admin: cib_shadow - Implement a --switch option
  + Medium: admin: crm_resource - create more compact constraints that don't use lifetime (which is deprecated)
  + Medium: ais: Approximate born_on for OpenAIS based clusters
  + Medium: cib: Remove do_id_check, it is a poor substitute for ID validation by a schema
  + Medium: cib: Skip construction of pre-notify messages if no-one wants one
  + Medium: Core: Attempt to streamline some key functions to increase performance
  + Medium: Core: Clean up XML parser after validation
  + Medium: crmd: Detect and optimize the crm's behavior when processing diffs of an LRM refresh
  + Medium: Fix memory leaks when resetting the name of an XML object
  + Medium: PE: Prefer the current location if it is one of a group of nodes with the same (highest) score

 -- Andrew Beekhof <abeekhof@suse.de>  Fri, 18 Jul 2008 10:06:36 +0200

pacemaker (0.7.0-1) unstable; urgency=low
  * Update source tarball to revision: bde0c7db74fb tip
  * Statistics:
      Changesets:      439
      Diff:            676 files changed, 41310 insertions(+), 52071 deletions(-)

  * Changes added since stable-0.6
  + High: A new tool for setting up and invoking CTS
  + High: Admin: All tools now use --node (-N) for specifying node unames
  + High: Admin: All tools now use --xml-file (-x) and --xml-text (-X) for specifying where to find XML blobs
  + High: cib: Cleanup the API - remove redundant input fields
  + High: cib: Implement CIB_shadow - a facility for making and testing changes before uploading them to the cluster
  + High: cib: Make registering per-op callbacks an API call and renamed (for clarity) the API call for requesting notifications
  + High: Core: Add a facility for automatically upgrading old configurations
  + High: Core: Adopt libxml2 as the XML processing library - all external clients need to be recompiled
  + High: Core: Allow sending TLS messages larger than the MTU
  + High: Core: Fix parsing of time-only ISO dates
  + High: Core: Smarter handling of XML values containing quotes
  + High: Core: XML memory corruption - catch, and handle, cases where we're overwriting an attribute value with itself
  + High: Core: The xml ID type doesn't allow UUIDs that start with a number
  + High: Core: Implement XPath based versions of query/delete/replace/modify
  + High: Core: Remove some HA2.0.(3,4) compatability code
  + High: crmd: Overhaul the detection of nodes that are starting vs. failed
  + High: PE: Bug LF:1459 - Allow failures to expire
  + High: PE: Have the PE do non-persistent configuration upgrades before performing calculations
  + High: PE: Replace failure-stickiness with a simple 'migration-threshold'
  + High: TE: Simplify the design by folding the tengine process into the crmd
  + Medium: Admin: Bug LF:1438 - Allow the list of all/active resource operations to be queried by crm_resource
  + Medium: Admin: Bug LF:1708 - crm_resource should print a warning if an attribute is already set as a meta attribute
  + Medium: Admin: Bug LF:1883 - crm_mon should display fail-count and operation history
  + Medium: Admin: Bug LF:1883 - crm_mon should display operation timing data
  + Medium: Admin: Bug N:371785 - crm_resource -C doesn't also clean up fail-count attributes
  + Medium: Admin: crm_mon - include timing data for failed actions
  + Medium: ais: Read options from the environment since objdb isn't completely usable yet
  + Medium: cib: Add sections for op_defaults and rsc_defaults
  + Medium: cib: Better matching notification callbacks (for detecting duplicates and removal)
  + Medium: cib: Bug LF:1348 - Allow rules and attribute sets to be referenced for use in other objects
  + Medium: cib: BUG LF:1918 - By default, all cib calls now timeout after 30s
  + Medium: cib: Detect updates that decrease the version tuple
  + Medium: cib: Implement a client-side operation timeout - Requires LHA update
  + Medium: cib: Implement callbacks and async notifications for remote connections
  + Medium: cib: Make cib->cmds->update() an alias for modify at the API level (also implemented in cibadmin)
  + Medium: cib: Mark the CIB as disconnected if the IPC connection is terminated
  + Medium: cib: New call option 'cib_can_create' which can be passed to modify actions - allows the object to be created if it doesn't exist yet
  + Medium: cib: Reimplement get|set|delete attributes using XPath
  + Medium: cib: Remove some useless parts of the API
  + Medium: cib: Remove the 'attributes' scaffolding from the new format
  + Medium: cib: Implement the ability for clients to connect to remote servers
  + Medium: Core: Add support for validating xml against RelaxNG schemas
  + Medium: Core: Allow more than one item to be modified/deleted in XPath based operations
  + Medium: Core: Fix the sort_pairs function for creating sorted xml objects
  + Medium: Core: iso8601 - Implement subtract_duration and fix subtract_time
  + Medium: Core: Reduce the amount of xml copying occuring
  + Medium: Core: Support value='value+=N' XML updates (in addtion to value='value++')
  + Medium: crmd: Add support for lrm_ops->fail_rsc if its available
  + Medium: crmd: HB - watch link status for node leaving events
  + Medium: crmd: Bug LF:1924 - Improved handling of lrmd disconnects and shutdowns
  + Medium: crmd: Do not wait for actions with a start_delay over 5 minutes. Confirm them immediately
  + Medium: PE: Bug LF:1328 - Don't fencing nodes in clusters without managed resources
  + Medium: PE: Bug LF:1461 - Give transient node attributes (in <status/>) preference over persistent ones (in <nodes/>)
  + Medium: PE: Bug LF:1884, Bug LF:1885 - Implement N:M ordering and colocation constraints
  + Medium: PE: Bug LF:1886 - Create a resource and operation 'defaults' config section
  + Medium: PE: Bug LF:1892 - Allow recurring actions to be triggered at known times
  + Medium: PE: Bug LF:1926 - Probes should complete before stop actions are invoked
  + Medium: PE: Fix the standby when it's set as a transient attribute
  + Medium: PE: Implement a global 'stop-all-resources' option
  + Medium: PE: Implement cibpipe, a tool for performing/simulating config changes "offline"
  + Medium: PE: We don't allow colocation with specific clone instances
  + Medium: Tools: pingd - Implement a stack-independant version of pingd
  + Medium: xml: Ship an xslt for upgrading from 0.6 to 0.7

 -- Andrew Beekhof <abeekhof@suse.de>  Wed, 25 Jun 2008 12:55:38 +0200

pacemaker (0.6.5-1) stable; urgency=medium
  * Update source tarball to revision: b9fe723d1ac5 tip
  * Statistics:
      Changesets:      48
      Diff:            37 files changed, 1204 insertions(+), 234 deletions(-)

  * Changes since Pacemaker-0.6.4
  + High: Admin: Repair the ability to delete failcounts
  + High: ais: Audit IPC handling between the AIS plugin and CRM processes
  + High: ais: Have the plugin create needed /var/lib directories
  + High: ais: Make sure the sync and async connections are assigned correctly (not swapped)
  + High: cib: Correctly detect configuration changes - num_updates does not count
  + High: PE: Apply stickiness values to the whole group, not the individual resources
  + High: PE: Bug N:385265 - Ensure groups are migrated instead of remaining partially active on the current node
  + High: PE: Bug N:396293 - Enforce manditory group restarts due to ordering constraints
  + High: PE: Correctly recover master instances found active on more than one node
  + High: PE: Fix memory leaks reported by Valgrind
  + Medium: Admin: crm_mon - Misc improvements from Satomi Taniguchi
  + Medium: Bug LF:1900 - Resource stickiness should not allow placement in asynchronous clusters
  + Medium: crmd: Ensure joins are completed promptly when a node taking part dies
  + Medium: PE: Avoid clone instance shuffling in more cases
  + Medium: PE: Bug LF:1906 - Remove an optimization in native_merge_weights() causing group scores to behave eratically
  + Medium: PE: Make use of target_rc data to correctly process resource operations
  + Medium: PE: Prevent a possible use of NULL in sort_clone_instance()
  + Medium: TE: Include target rc in the transition key - used to correctly determin operation failure

 -- Andrew Beekhof <abeekhof@suse.de>  Thu, 19 Jun 2008 14:35:49 +0200

pacemaker (0.6.4-1) stable; urgency=medium
  * Update source tarball to revision: 226d8e356924 tip
  * Statistics:
      Changesets:       55
      Diff:             199 files changed, 7103 insertions(+), 12378 deletions(-)

  * Changes since Pacemaker-0.6.3
  + High: crmd: Bug LF:1881 LF:1882 - Overhaul the logic for operation cancelation and deletion
  + High: crmd: Bug LF:1894 - Make sure cancelled recurring operations are cleaned out from the CIB
  + High: PE: Bug N:387749 - Colocation with clones causes unnecessary clone instance shuffling
  + High: PE: Ensure 'master' monitor actions are cancelled _before_ we demote the resource
  + High: PE: Fix assert failure leading to core dump - make sure variable is properly initialized
  + High: PE: Make sure 'slave' monitoring happens after the resource has been demoted
  + High: PE: Prevent failure stickiness underflows (where too many failures become a _positive_ preference)
  + Medium: Admin: crm_mon - Only complain if the output file could not be opened
  + Medium: Common: filter_action_parameters - enable legacy handling only for older versions
  + Medium: PE: Bug N:385265 - The failure stickiness of group children is ignored until it reaches -INFINITY
  + Medium: PE: Implement master and clone colocation by exlcuding nodes rather than setting one's score to INFINITY (similar to cs: 756afc42dc51)
  + Medium: TE: Bug LF:1875 - Correctly find actions to cancel when their node leaves the cluster

 -- Andrew Beekhof <abeekhof@suse.de>  Thu, 22 May 2008 22:10:30 +0200

pacemaker (0.6.3-1) stable; urgency=medium
  * Update source tarball to revision: fd8904c9bc67 tip
  * Statistics:
      Changesets:      117
      Diff:            354 files changed, 19094 insertions(+), 11338 deletions(-)

  * Changes since Pacemaker-0.6.2
  + High: Admin: Bug LF:1848 - crm_resource - Pass set name and id to delete_resource_attr() in the correct order
  + High: Build: SNMP has been moved to the management/pygui project
  + High: crmd: Bug LF1837 - Unmanaged resources prevent crmd from shutting down
  + High: crmd: Prevent use-after-free in lrm interface code (Patch based on work by Keisuke MORI)
  + High: PE: Allow the cluster to make progress by not retrying failed demote actions
  + High: PE: Anti-colocation with slave shouldn't prevent master colocation
  + High: PE: Bug LF 1768 - Wait more often for STONITH ops to complete before starting resources
  + High: PE: Bug LF1836 - Allow is-managed-default=false to be overridden by individual resources
  + High: PE: Bug LF185 - Prevent pointless master/slave instance shuffling by ignoring the master-pref of stopped instances
  + High: PE: Bug N-191176 - Implement interleaved ordering for clone-to-clone scenarios
  + High: PE: Bug N-347004 - Ensure clone notifications are always sent when an instance is stopped/started
  + High: PE: Bug N-347004 - Include notification ordering is correct for interleaved clones
  + High: PE: Bug PM-11 - Directly link probe_complete to starting clone instances
  + High: PE: Bug PM1 - Fix setting failcounts when applied to complex resources
  + High: PE: Bug PM12, LF1648 - Extensive revision of group ordering
  + High: PE: Bug PM7 - Ensure masters are always demoted before they are stopped
  + High: PE: Create probes after allocation to allow smarter handling of anonymous clones
  + High: PE: Don't prioritize clone instances that must be moved
  + High: PE: Fix error in previous commit that allowed more than the required number of masters to be promoted
  + High: PE: Group start ordering fixes
  + High: PE: Implement promote/demote ordering for cloned groups
  + High: TE: Repair failcount updates
  + High: TE: Use the correct offset when updating failcount
  + Medium: Admin: Add a summary output that can be easily parsed by CTS for audit purposes
  + Medium: Build: Make configure fail if bz2 or libxml2 are not present
  + Medium: Build: Re-instate a better default for LCRSODIR
  + Medium: CIB: Bug LF-1861 - Filter irrelvant error status from synchronous CIB clients
  + Medium: Core: Bug 1849 - Invalid conversion of ordinal leap year to gregorian date
  + Medium: Core: Drop compataibility code for 2.0.4 and 2.0.5 clusters
  + Medium: crmd: Bug LF-1860 - Automatically cancel recurring ops before demote and promote operations (not only stops)
  + Medium: crmd: Save the current CIB contents if we detect the PE crashed
  + Medium: PE: Bug LF:1866 - Fix version check when applying compatability handling for failed start operations
  + Medium: PE: Bug LF:1866 - Restore the ability to have start failures not be fatal
  + Medium: PE: Bug PM1 - Failcount applies to all instances of non-unique clone
  + Medium: PE: Correctly set the state of partially active master/slave groups
  + Medium: PE: Don't claim to be stopping an already stopped orphan
  + Medium: PE: Ensure implies_left ordering constraints are always effective
  + Medium: PE: Indicate each resource's 'promotion' score
  + Medium: PE: Prevent a possible use-of-NULL
  + Medium: PE: Reprocess the current action if it changed (so that any prior dependancies are updated)
  + Medium: TE: Bug LF-1859 - Wait for fail-count updates to complete before terminating the transition
  + Medium: TE: Bug LF:1859 - Don't abort graphs due to our own failcount updates
  + Medium: TE: Bug LF:1859 - Prevent the TE from interupting itself

 -- Andrew Beekhof <abeekhof@suse.de>  Wed, 23 Apr 2008 10:39:58 +0200

pacemaker (0.6.2-1) stable; urgency=medium
  * Update source tarball to revision: 28b1a8c1868b tip
  * Statistics:
      Changesets:    11
      Diff:          7 files changed, 58 insertions(+), 18 deletions(-)

  * Changes since Pacemaker-0.6.1
  + haresources2cib.py: set default-action-timeout to the default (20s)
  + haresources2cib.py: update ra parameters lists
  + Medium: SNMP: Allow the snmp subagent to be built (patch from MATSUDA, Daiki)
  + Medium: Tools: Make sure the autoconf variables in haresources2cib are expanded

 -- Andrew Beekhof <abeekhof@suse.de>  Thu, 14 February 2008 08:51:43 +0200

pacemaker (0.6.1-1) stable; urgency=medium
  * Update source tarball to revision: e7152d1be933 tip
  * Statistics:
      Changesets:    25
      Diff:          37 files changed, 1323 insertions(+), 227 deletions(-)

  * Changes since Pacemaker-0.6.0
  + High: CIB: Ensure changes to top-level attributes (like admin_epoch) cause a disk write
  + High: CIB: Ensure the archived file hits the disk before returning
  + High: CIB: Repair the ability to do 'atomic incriment' updates (value="value++")
  + High: crmd: Bug #7 - Connecting to the crmd immediately after startup causes use-of-NULL
  + Medium: CIB: Mask cib_diff_resync results from the caller - they don't need to know
  + Medium: crmd: Delay starting the IPC server until we're fully functional
  + Medium: CTS: Fix the startup patterns
  + Medium: PE: Bug 1820 - Allow the first resource in a group to be migrated
  + Medium: PE: Bug 1820 - Check the colocation dependancies of resources to be migrated

 -- Andrew Beekhof <abeekhof@suse.de>  Tue, 12 February 2008 09:25:04 +0200

pacemaker (0.6.0-2) stable; urgency=medium

  * This is the first release of the Pacemaker Cluster Resource Manager formerly part of Heartbeat.

  * For those looking for the GUI, mgmtd, CIM or TSA components, they are now found in
    the new pacemaker-pygui project.  Build dependancies prevent them from being
    included in Heartbeat (since the built-in CRM is no longer supported) and,
    being non-core components, are not included with Pacemaker.

  * Update source tarball to revision: c94b92d550cf
  * Statistics:
      Changesets:      347
      Diff:            2272 files changed, 132508 insertions(+), 305991 deletions(-)

  * Test hardware:
    + 6-node vmware cluster (sles10-sp1/256Mb/vmware stonith) on a single host (opensuse10.3/2Gb/2.66Ghz Quad Core2)
    + 7-node EMC Centera cluster (sles10/512Mb/2Ghz Xeon/ssh stonith)

  * Notes: Heartbeat Stack 
    + All testing was performed with STONITH enabled
    + The CRM was enabled using the "crm respawn" directive
    + Testing
      2-nodes ::= 1000 CTS iterations (passed)
      4-nodes ::= 1000 CTS iterations (passed)
      6-nodes ::= 2000 CTS iterations (passed)
    + Total estimated cluster transitions: 18000

  * Notes: OpenAIS Stack 
    + This release contains a preview of support for the OpenAIS cluster stack
    + The current release of the OpenAIS project is missing two important 
      patches that we require.  OpenAIS packages containing these patches are 
      available for most major distributions at:
        http://download.opensuse.org/repositories/server:/ha-clustering
    + The OpenAIS stack is not currently recommended for use in clusters that 
      have shared data as STONITH support is not yet implimented 
    + pingd is not yet available for use with the OpenAIS stack
    + 3 significant OpenAIS issues were found during testing of 4 and 6 node
      clusters.  We are activly working together with the OpenAIS project to
      get these resolved.
    + Testing
      2-nodes ::= 1000 CTS iterations (passed)
      4-nodes ::= 1000 CTS iterations (sporadic problems - see pending bugs)
      6-nodes ::= 1000 CTS iterations (significant problems - see pending bugs)
    + Total estimated cluster transitions: 12000

  * Pending bugs encountered during testing:
    + OpenAIS   #1736 - Openais membership took 20s to stabilize
    + Heartbeat #1750 - ipc_bufpool_update: magic number in head does not match
    + OpenAIS   #1793 - Assertion failure in memb_state_gather_enter()
    + OpenAIS   #1796 - Cluster message corruption

  * Changes since Heartbeat-2.1.2-24
  + High: Add OpenAIS support
  + High: Admin: crm_uuid - Look in the right place for Heartbeat UUID files
  + High: admin: Exit and indicate a problem if the crmd exits while crmadmin is performing a query
  + High: cib: Fix CIB_OP_UPDATE calls that modify the whole CIB
  + High: cib: Fix compilation when supporting the heartbeat stack
  + High: cib: Fix memory leaks caused by the switch to get_message_xml()
  + High: cib: HA_VALGRIND_ENABLED needs to be set _and_ set to 1|yes|true
  + High: cib: Use get_message_xml() in preference to cl_get_struct()
  + High: cib: Use the return value from call to write() in cib_send_plaintext()
  + High: Core: ccm nodes can legitimately have a node id of 0
  + High: Core: Fix peer-process tracking for the Heartbeat stack
  + High: Core: Heartbeat doesn't send status notifications for nodes that were already part of the cluster.  Fake them instead
  + High: CRM: Add children to HA_Messages such that the field name matches F_XML_TAGNAME
  + High: crm: Adopt a more flexible appraoch to enabling Valgrind
  + High: crm: Fix compilation when bzip2 is not installed
  + High: CRM: Future-proof get_message_xml()
  + High: crmd: Filter election responses based on time not FSA state
  + High: crmd: Handle all possible peer states in crmd_ha_status_callback()
  + High: crmd: Make sure the current date/time is set - prevents use-of-NULL when evaluating rules
  + High: crmd: Relax an assertion regrading  ccm membership instances
  + High: crmd: Use (node->processes&crm_proc_ais) to accurately update the CIB after replace operations
  + High: crmd: Heartbeat: Accurately record peer client status
  + High: PE: Bug 1777 - Allow colocation with a resource in the Stopped state
  + High: PE: Bug 1822 - Prevent use-of-NULL in PromoteRsc()
  + High: PE: Implement three recovery policies based on op_status and op_rc
  + High: PE: Parse fail-count correctly (it may be set to ININFITY)
  + High: PE: Prevent graph-loop when stonith agents need to be moved around before a STONITH op
  + High: PE: Prevent graph-loops when two operations have the same name+interval
  + High: te: Cancel active timers when destroying graphs
  + High: TE: Ensure failcount is set correctly for failed stops/starts
  + High: TE: Update failcount for oeprations that time out
  + Medium: admin: Prevent hang in crm_mon -1 when there is no cib connection - Patch from Junko IKEDA
  + Medium: cib: Require --force|-f when performing potentially dangerous commands with cibadmin
  + Medium: cib: Tweak the shutdown code
  + Medium: Common: Only count peer processes of active nodes
  + Medium: Core: Create generic cluster sign-in method
  + Medium: core: Fix compilation when Heartbeat support is disabled
  + Medium: Core: General cleanup for supporting two stacks
  + Medium: Core: iso6601 - Support parsing of time-only strings
  + Medium: core: Isolate more code that's only needed when SUPPORT_HEARTBEAT is enabled
  + Medium: crm: Improved logging of errors in the XML parser
  + Medium: crmd: Fix potential use-of-NULL in string comparison
  + Medium: crmd: Reimpliment syncronizing of CIB queries and updates when invoking the PE
  + Medium: crm_mon: Indicate when a node is both in standby mode and offline
  + Medium: PE: Bug 1822 - Don't try an promote groups if not all of it is active
  + Medium: PE: on_fail=nothing is an alias for 'ignore' not 'restart'
  + Medium: PE: Prevent a potential use-of-NULL in cron_range_satisfied()
  + snmp subagent: fix a problem on displaying an unmanaged group
  + snmp subagent: use the syslog setting
  + snmp: v2 support (thanks to Keisuke MORI)
  + snmp_subagent - made it not complain about some things if shutting down

 -- Andrew Beekhof <abeekhof@suse.de>  Mon, 14 January 2008 09:09:32 +0200

pacemaker (0.6.0-1) stable; urgency=low

  * Initial package check-in



 -- Andrew Beekhof <abeekhof@suse.de>  Wed, 10 December 2007 23:11:00 +0200

pacemaker (0.0.1) unstable; urgency=low

  * Dummy changelog entry

 -- Andrew Beekhof <andrew@beekhof.net>  Mon, 29 Oct 2007 15:37:49 +0900

Local variables:
mode: debian-changelog
End:
